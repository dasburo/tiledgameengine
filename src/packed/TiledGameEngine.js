/*! TiledGameEngine v0.0.1 - 10th Mar 2015 | https://github.com/elvariongh/tiledgameengine */
(function(e){var a=void 0,c=!1;function f(){this.a=a;this.debug=c}var g=a,h=0,j=0,k=0,l=c,m=c,n={},p=c;f.prototype.init=function(){l||(l=!0,this.frame=this.frame.bind(this),f.bus=new f.PubSub,f.bus.subscribe("invalidateStage",this.b.bind(this)),this.f=g)};f.prototype.b=function(b,d){this.a&&this.a.name===d&&(p=!0)};f.prototype.start=function(){l&&(m||(h=e.requestAnimationFrame(this.frame)),m=!0)};f.prototype.stop=function(){m&&h&&e.cancelAnimationFrame(h);h=0;m=c;this.a&&(this.a.deactivate(),this.a=a)};
f.prototype.frame=function(b){g&&g.tickStart();var d=~~(b-k);if(!(0<j-d)||p)k=b,j=this.d(d,b),this.c();h=e.requestAnimationFrame(this.frame);g&&g.tick()};f.prototype.d=function(b,d){return this.a?this.a.update(b,~~d):~~(1E3/60)};f.prototype.c=function(){this.a&&(this.a.redraw||p)&&this.a.render();p=c};f.prototype.addStage=function(b,d){return!n[b]?(n[b]=d,!0):c};f.prototype.getStage=function(b){return!n[b]?a:n[b]};
f.prototype.activateStage=function(b){this.a&&(this.a.deactivate(),this.a=a);g&&g.e();n[b]&&(this.a=n[b],this.a.activate(),this.a.redraw=!0);g&&(g=new FPSMeter(document.getElementById("viewport"),{graph:1,heat:1,theme:"transparent"}));return this.a!==a};f.bus=a;e.TiledGameEngine=f})(window);