/*! TiledGameEngine v1.0.0 - 20th Feb 2015 | https://github.com/elvariongh/tiledgameengine */
(function(h,g){function f(b,c){this.b=c;this.a=b;this.ready=!1;this.layers=[];this.tilesets=[];this.tilewidth=64;this.tileheight=32;this.bgcolor="#000"}f.prototype.parse=function(){if(!this.a)return!1;var b=this.a.get(this.b);if(!b)return!1;for(var c=b.layers,a,d=c.length;d--;)a=c[d],"tilelayer"===a.type&&(a.data=new Uint16Array(a.data));b.layers=c;c=b.tilesets;for(d=c.length;d--;)a=c[d],a.rows=~~(a.imageheight/a.tileheight),a.cols=~~(a.imagewidth/a.tilewidth),a.lastgid=~~(a.firstgid+a.rows*a.cols)-
1,delete a.imageheight,delete a.imagewidth;b.tilesets=c;this.layers=b.layers;this.tilesets=b.tilesets;this.tilewidth=b.tilewidth;this.tileheight=b.tileheight;this.bgcolor=b.backgroundcolor;this.ready=!0;g.bus.notify("tmxMapParsed");return!0};f.prototype.getAssets=function(){var b=this.a.get(this.b);if(!b)return[];for(var c=b.tilesets,a=[],d,e=c.length;e--;)d=c[e],!d.properties.download||"false"!==d.properties.download&&"0"!==d.properties.download?a[a.length]=d.image:(delete c[e],c.splice(e,1),++e);
b.tilesets=c;return a};g.TiledMap=f})(window,TiledGameEngine);